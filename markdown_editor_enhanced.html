<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Markdown å®æ—¶é¢„è§ˆç¼–è¾‘å™¨ - å¾®ä¿¡å…¬ä¼—å·é£æ ¼ï¼ˆå¢å¼ºç‰ˆï¼‰</title>

  <!-- å¼•å…¥Markdownè§£æå™¨ -->
  <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>

  <style>
    /* é‡ç½®æ ·å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* é¡µé¢åŸºç¡€æ ·å¼ */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background-color: #f5f5f5;
      color: #333;
      height: 100vh;
      overflow: hidden;
      transition: background-color 0.3s, color 0.3s;
    }

    /* æš—è‰²ä¸»é¢˜ */
    body[data-weui-theme="dark"] {
      background-color: #111;
      color: #e6e6e6;
    }

    /* é¡¶éƒ¨å·¥å…·æ  */
    .toolbar {
      height: 60px;
      background-color: white;
      border-bottom: 1px solid #e5e5e5;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      transition: background-color 0.3s, border-color 0.3s;
    }

    body[data-weui-theme="dark"] .toolbar {
      background-color: #1e1e1e;
      border-bottom-color: #404040;
    }

    .toolbar-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .toolbar-title {
      font-size: 18px;
      font-weight: bold;
      color: #07C160;
    }

    .toolbar-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* æŒ‰é’®æ ·å¼ */
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
      background-color: #07C160;
      color: white;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .btn:hover {
      background-color: #059A4C;
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(7, 193, 96, 0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background-color: #576B95;
    }

    .btn-secondary:hover {
      background-color: #485a7f;
      box-shadow: 0 2px 8px rgba(87, 107, 149, 0.3);
    }

    .btn-outline {
      background-color: transparent;
      color: #07C160;
      border: 1px solid #07C160;
    }

    .btn-outline:hover {
      background-color: rgba(7, 193, 96, 0.1);
      box-shadow: 0 2px 8px rgba(7, 193, 96, 0.2);
    }

    body[data-weui-theme="dark"] .btn-outline {
      color: #07C160;
      border-color: #07C160;
    }

    body[data-weui-theme="dark"] .btn-outline:hover {
      background-color: rgba(7, 193, 96, 0.2);
    }

    /* ä¸»å®¹å™¨ */
    .container {
      display: flex;
      height: calc(100vh - 60px);
      gap: 0;
    }

    /* ç¼–è¾‘åŒº */
    .editor-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      background-color: white;
      border-right: 1px solid #e5e5e5;
      transition: background-color 0.3s, border-color 0.3s;
    }

    body[data-weui-theme="dark"] .editor-panel {
      background-color: #1e1e1e;
      border-right-color: #404040;
    }

    .panel-header {
      padding: 15px 20px;
      border-bottom: 1px solid #e5e5e5;
      font-weight: bold;
      font-size: 14px;
      color: #666;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    body[data-weui-theme="dark"] .panel-header {
      border-bottom-color: #404040;
      color: #999;
    }

    /* æ ¼å¼åŒ–å·¥å…·æ  */
    .format-toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      padding: 10px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #fafafa;
      transition: background-color 0.3s, border-color 0.3s;
    }

    body[data-weui-theme="dark"] .format-toolbar {
      background-color: #2a2a2a;
      border-bottom-color: #404040;
    }

    .format-btn {
      padding: 6px 10px;
      border: 1px solid #ddd;
      border-radius: 3px;
      background-color: white;
      color: #333;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 4px;
      min-width: 32px;
      justify-content: center;
    }

    .format-btn:hover {
      background-color: #07C160;
      color: white;
      border-color: #07C160;
      transform: translateY(-1px);
    }

    .format-btn:active {
      transform: translateY(0);
    }

    body[data-weui-theme="dark"] .format-btn {
      background-color: #3a3a3a;
      border-color: #555;
      color: #e6e6e6;
    }

    body[data-weui-theme="dark"] .format-btn:hover {
      background-color: #07C160;
      border-color: #07C160;
      color: white;
    }

    .format-divider {
      width: 1px;
      background-color: #ddd;
      margin: 0 4px;
    }

    body[data-weui-theme="dark"] .format-divider {
      background-color: #555;
    }

    .markdown-input {
      flex: 1;
      padding: 20px;
      border: none;
      outline: none;
      resize: none;
      font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
      background-color: transparent;
      color: inherit;
    }

    /* é¢„è§ˆåŒº */
    .preview-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      background-color: #f8f8f8;
      overflow: hidden;
      transition: background-color 0.3s;
    }

    body[data-weui-theme="dark"] .preview-panel {
      background-color: #111;
    }

    .preview-content {
      flex: 1;
      overflow-y: auto;
      padding: 30px;
    }

    .preview-wrapper {
      max-width: 677px;
      margin: 0 auto;
      background-color: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      min-height: calc(100vh - 180px);
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    body[data-weui-theme="dark"] .preview-wrapper {
      background-color: rgb(25, 25, 25);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    /* å¾®ä¿¡å…¬ä¼—å·æ–‡ç« æ ·å¼ - æ¥è‡ª editor1 */
    .rich_media_content {
      font-family: -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;
      font-size: 15px;
      color: rgb(63, 63, 63);
      background-color: transparent;
      line-height: 1.75;
      letter-spacing: 2px;
    }

    /* æ®µè½ */
    .rich_media_content p {
      margin: 0px 8px 1em;
      padding: 0px;
      color: rgb(63, 63, 63);
      font-size: 15px;
      letter-spacing: 2px;
      line-height: 1.75;
      text-align: left;
    }

    /* æ ‡é¢˜ - ä½¿ç”¨ editor1 çš„æ ·å¼ */
    .rich_media_content h1 {
      font-size: 24px;
      font-weight: bold;
      color: rgb(30, 30, 30);
      margin: 0.6em 0;
      line-height: 1.4;
    }

    .rich_media_content h2 {
      font-size: 17px;
      font-weight: bold;
      color: rgb(30, 30, 30);
      margin: 0.6em 0;
      line-height: 1.5;
    }

    .rich_media_content h3 {
      font-size: 15px;
      font-weight: bold;
      color: rgb(30, 30, 30);
      margin: 0.5em 0;
      line-height: 1.5;
    }

    .rich_media_content h4,
    .rich_media_content h5,
    .rich_media_content h6 {
      font-size: 15px;
      font-weight: bold;
      color: rgb(63, 63, 63);
      margin: 0.4em 0;
      line-height: 1.5;
    }

    /* ç²—ä½“å’Œæ–œä½“ */
    .rich_media_content strong,
    .rich_media_content b {
      font-weight: bold;
      color: inherit;
    }

    .rich_media_content em,
    .rich_media_content i {
      font-style: italic;
    }

    .rich_media_content del,
    .rich_media_content s {
      text-decoration: line-through;
      opacity: 0.7;
    }

    /* é“¾æ¥ */
    .rich_media_content a {
      color: rgb(0, 128, 255);
      text-decoration: underline;
      font-weight: bold;
    }

    /* å›¾ç‰‡ */
    .rich_media_content img {
      max-width: 100%;
      height: auto;
      border-radius: 9px;
      box-shadow: rgb(180, 180, 180) 0px 0px 0.5em 0px;
      display: block;
      margin: 0 auto;
    }

    /* åˆ†å‰²çº¿ */
    .rich_media_content hr {
      border-style: solid;
      border-width: 1px 0 0;
      border-color: rgba(0, 0, 0, 0.1);
      transform: scale(1, 0.5);
      margin: 1em 0;
    }

    /* ä»£ç å— */
    .rich_media_content pre {
      margin: 0px 8px 10px;
      display: block;
      overflow-x: auto;
      color: rgb(201, 209, 217);
      background: rgb(13, 17, 23);
      text-align: left;
      line-height: 1.5;
      border-radius: 8px;
      padding: 0px;
      font-size: 14px;
    }

    .rich_media_content pre code {
      font-family: Menlo, "Operator Mono", Consolas, Monaco, monospace;
      font-size: 13px;
      display: block;
      padding: 0.5em 1em 1em;
      overflow-x: auto;
      line-height: 1.75;
      color: rgb(201, 209, 217);
      background: transparent;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    /* è¡Œå†…ä»£ç  */
    .rich_media_content code {
      font-family: Menlo, "Operator Mono", Consolas, Monaco, monospace;
      font-size: 13px;
      background-color: rgba(27, 31, 35, 0.05);
      padding: 0.2em 0.4em;
      border-radius: 3px;
      color: rgb(215, 58, 73);
    }

    /* å¼•ç”¨å— */
    .rich_media_content blockquote {
      margin: 1em 8px;
      padding: 0.8em 1em;
      border-left: 4px solid rgb(220, 220, 220);
      background-color: rgba(0, 0, 0, 0.03);
      color: rgb(99, 99, 99);
    }

    .rich_media_content blockquote p {
      margin: 0.5em 0;
      padding: 0;
      line-height: 1.75;
      font-size: 15px;
      letter-spacing: 2px;
      color: inherit;
    }

    /* åˆ—è¡¨ */
    .rich_media_content ul {
      margin: 1em 8px;
      padding-left: 1.5em;
      list-style-type: disc;
    }

    .rich_media_content ol {
      margin: 1em 8px;
      padding-left: 1.5em;
      list-style-type: decimal;
    }

    .rich_media_content li {
      margin: 0.5em 0;
      color: rgb(63, 63, 63);
      font-size: 15px;
      letter-spacing: 2px;
      line-height: 1.75;
    }

    /* è¡¨æ ¼ - æ— æ–‘é©¬çº¹ */
    .rich_media_content table {
      margin: 1em 8px;
      border-collapse: collapse;
      width: calc(100% - 16px);
      font-size: 14px;
      overflow-x: auto;
      display: block;
    }

    .rich_media_content th,
    .rich_media_content td {
      padding: 0.6em 1em;
      border: 1px solid rgb(229, 229, 229);
      text-align: left;
    }

    .rich_media_content th {
      font-weight: bold;
      background-color: rgb(248, 248, 248);
      color: rgb(30, 30, 30);
    }

    .rich_media_content td {
      color: rgb(63, 63, 63);
    }

    /* æ»šåŠ¨æ¡æ ·å¼ */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }

    body[data-weui-theme="dark"] ::-webkit-scrollbar-track {
      background: #2c2c2c;
    }

    body[data-weui-theme="dark"] ::-webkit-scrollbar-thumb {
      background: #555;
    }

    body[data-weui-theme="dark"] ::-webkit-scrollbar-thumb:hover {
      background: #666;
    }

    /* å­—æ•°ç»Ÿè®¡ */
    .stats {
      padding: 10px 20px;
      border-top: 1px solid #e5e5e5;
      font-size: 12px;
      color: #999;
      display: flex;
      gap: 20px;
    }

    body[data-weui-theme="dark"] .stats {
      border-top-color: #404040;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media screen and (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .editor-panel {
        border-right: none;
        border-bottom: 1px solid #e5e5e5;
      }

      body[data-weui-theme="dark"] .editor-panel {
        border-bottom-color: #404040;
      }

      .preview-wrapper {
        padding: 20px;
      }

      .toolbar-title {
        font-size: 16px;
      }

      .btn {
        padding: 6px 12px;
        font-size: 12px;
      }

      .btn span:not(.icon) {
        display: none;
      }

      /* æ ¼å¼åŒ–å·¥å…·æ åœ¨ç§»åŠ¨ç«¯çš„ä¼˜åŒ– */
      .format-toolbar {
        overflow-x: auto;
        flex-wrap: nowrap;
        padding: 8px;
      }

      .format-btn {
        padding: 5px 8px;
        font-size: 12px;
        min-width: 28px;
        flex-shrink: 0;
      }
    }

    /* åŠ è½½åŠ¨ç”» */
    .loading {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #07C160;
      font-size: 14px;
      display: none;
    }

    .loading.show {
      display: block;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #07C160;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* æç¤ºæ¶ˆæ¯ */
    .toast {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 12px 24px;
      border-radius: 4px;
      font-size: 14px;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }

    .toast.show {
      opacity: 1;
    }

    /* å›¾æ ‡ */
    .icon {
      display: inline-block;
      width: 16px;
      height: 16px;
    }

    /* æ¨¡æ€æ¡† */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 9998;
      align-items: center;
      justify-content: center;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 8px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    body[data-weui-theme="dark"] .modal-content {
      background-color: #1e1e1e;
    }

    .modal-header {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .modal-footer {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    .example-item {
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #e5e5e5;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .example-item:hover {
      border-color: #07C160;
      background-color: rgba(7, 193, 96, 0.05);
    }

    .example-item-title {
      font-weight: bold;
      margin-bottom: 4px;
    }

    .example-item-desc {
      font-size: 12px;
      color: #999;
    }

    /* æ–‡ä»¶è¾“å…¥æ ·å¼ */
    .file-input-wrapper {
      position: relative;
      display: inline-block;
    }

    .file-input-wrapper input[type="file"] {
      position: absolute;
      left: -9999px;
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å·¥å…·æ  -->
  <div class="toolbar">
    <div class="toolbar-left">
      <div class="toolbar-title">ğŸ“ Markdown å®æ—¶é¢„è§ˆï¼ˆå¢å¼ºç‰ˆï¼‰</div>
    </div>
    <div class="toolbar-right">
      <button class="btn btn-outline" onclick="loadExample()">
        <span class="icon">ğŸ“„</span>
        <span>ç¤ºä¾‹</span>
      </button>
      <button class="btn btn-outline" onclick="clearEditor()">
        <span class="icon">ğŸ—‘ï¸</span>
        <span>æ¸…ç©º</span>
      </button>
      <button class="btn btn-outline" onclick="loadCustomCSS()">
        <span class="icon">ğŸ¨</span>
        <span>åŠ è½½CSS</span>
      </button>
      <button class="btn btn-outline" onclick="resetCSS()">
        <span class="icon">ğŸ”„</span>
        <span>é‡ç½®æ ·å¼</span>
      </button>
      <button class="btn" onclick="copyToWeChat()" style="background: linear-gradient(135deg, #07C160 0%, #38CD7F 100%);">
        <span class="icon">ğŸ“±</span>
        <span>å¤åˆ¶åˆ°å¾®ä¿¡</span>
      </button>
      <button class="btn btn-secondary" onclick="copyHTML()">
        <span class="icon">ğŸ“‹</span>
        <span>HTMLä»£ç </span>
      </button>
      <button class="btn btn-secondary" onclick="downloadHTML()">
        <span class="icon">ğŸ’¾</span>
        <span>ä¸‹è½½</span>
      </button>
      <button class="btn btn-outline" onclick="toggleTheme()">
        <span class="icon">ğŸŒ“</span>
        <span>ä¸»é¢˜</span>
      </button>
    </div>
  </div>

  <!-- ä¸»å®¹å™¨ -->
  <div class="container">
    <!-- å·¦ä¾§ç¼–è¾‘åŒº -->
    <div class="editor-panel">
      <div class="panel-header">
        <span>âœï¸</span>
        <span>Markdown ç¼–è¾‘å™¨</span>
      </div>
      <!-- æ ¼å¼åŒ–å·¥å…·æ  -->
      <div class="format-toolbar">
        <button class="format-btn" onclick="insertFormat('h1')" title="ä¸€çº§æ ‡é¢˜">H1</button>
        <button class="format-btn" onclick="insertFormat('h2')" title="äºŒçº§æ ‡é¢˜">H2</button>
        <button class="format-btn" onclick="insertFormat('h3')" title="ä¸‰çº§æ ‡é¢˜">H3</button>
        <div class="format-divider"></div>
        <button class="format-btn" onclick="insertFormat('bold')" title="ç²—ä½“ (Ctrl+B)"><strong>B</strong></button>
        <button class="format-btn" onclick="insertFormat('italic')" title="æ–œä½“ (Ctrl+I)"><em>I</em></button>
        <button class="format-btn" onclick="insertFormat('strikethrough')" title="åˆ é™¤çº¿"><s>S</s></button>
        <div class="format-divider"></div>
        <button class="format-btn" onclick="insertFormat('quote')" title="å¼•ç”¨">â</button>
        <button class="format-btn" onclick="insertFormat('code')" title="è¡Œå†…ä»£ç ">&lt;/&gt;</button>
        <button class="format-btn" onclick="insertFormat('codeblock')" title="ä»£ç å—">{ }</button>
        <div class="format-divider"></div>
        <button class="format-btn" onclick="insertFormat('ul')" title="æ— åºåˆ—è¡¨">â€¢ List</button>
        <button class="format-btn" onclick="insertFormat('ol')" title="æœ‰åºåˆ—è¡¨">1. List</button>
        <button class="format-btn" onclick="insertFormat('task')" title="ä»»åŠ¡åˆ—è¡¨">â˜‘ Task</button>
        <div class="format-divider"></div>
        <button class="format-btn" onclick="insertFormat('link')" title="é“¾æ¥">ğŸ”—</button>
        <button class="format-btn" onclick="insertFormat('image')" title="å›¾ç‰‡">ğŸ–¼ï¸</button>
        <button class="format-btn" onclick="insertFormat('table')" title="è¡¨æ ¼">ğŸ“Š</button>
        <button class="format-btn" onclick="insertFormat('hr')" title="åˆ†å‰²çº¿">â€”</button>
      </div>
      <textarea
        class="markdown-input"
        id="markdownInput"
        placeholder="åœ¨è¿™é‡Œè¾“å…¥ Markdown å†…å®¹...&#10;&#10;æ”¯æŒæ‰€æœ‰æ ‡å‡† Markdown è¯­æ³•ï¼š&#10;- æ ‡é¢˜ (# åˆ° ######)&#10;- ç²—ä½“ (**text**)ã€æ–œä½“ (*text*)&#10;- åˆ—è¡¨ã€ä»£ç å—ã€è¡¨æ ¼&#10;- é“¾æ¥ã€å›¾ç‰‡&#10;- å¼•ç”¨å—&#10;- æ›´å¤š...&#10;&#10;ç‚¹å‡»å³ä¸Šè§’\"ç¤ºä¾‹\"æŒ‰é’®æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹ï¼"
      ></textarea>
      <div class="stats">
        <span>å­—æ•°: <span id="charCount">0</span></span>
        <span>è¡Œæ•°: <span id="lineCount">0</span></span>
        <span>å­—ç¬¦: <span id="wordCount">0</span></span>
      </div>
    </div>

    <!-- å³ä¾§é¢„è§ˆåŒº -->
    <div class="preview-panel">
      <div class="panel-header">
        <span>ğŸ‘ï¸</span>
        <span>å®æ—¶é¢„è§ˆ</span>
      </div>
      <div class="preview-content">
        <div class="preview-wrapper">
          <div class="rich_media_content" id="preview">
            <p style="color: #999; text-align: center; padding: 40px 20px;">
              åœ¨å·¦ä¾§è¾“å…¥ Markdownï¼Œè¿™é‡Œä¼šå®æ—¶æ˜¾ç¤ºé¢„è§ˆæ•ˆæœ<br><br>
              <em>è¯•è¯•è¾“å…¥ <code># æ ‡é¢˜</code> æˆ–ç‚¹å‡»"ç¤ºä¾‹"æŒ‰é’®</em>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- åŠ è½½åŠ¨ç”» -->
  <div class="loading" id="loading">
    <div class="spinner"></div>
    <div>å¤„ç†ä¸­...</div>
  </div>

  <!-- æç¤ºæ¶ˆæ¯ -->
  <div class="toast" id="toast"></div>

  <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
  <input type="file" id="cssFileInput" accept=".css" style="display: none;">

  <!-- ç¤ºä¾‹æ¨¡æ€æ¡† -->
  <div class="modal" id="exampleModal">
    <div class="modal-content">
      <div class="modal-header">é€‰æ‹©ç¤ºä¾‹æ¨¡æ¿</div>
      <div id="exampleList">
        <div class="example-item" onclick="loadExampleContent('basic')">
          <div class="example-item-title">ğŸ¯ åŸºç¡€ç¤ºä¾‹</div>
          <div class="example-item-desc">åŒ…å«å¸¸ç”¨çš„æ ‡é¢˜ã€æ®µè½ã€åˆ—è¡¨ç­‰åŸºç¡€æ ¼å¼</div>
        </div>
        <div class="example-item" onclick="loadExampleContent('full')">
          <div class="example-item-title">ğŸ“š å®Œæ•´ç¤ºä¾‹</div>
          <div class="example-item-desc">å±•ç¤ºæ‰€æœ‰æ”¯æŒçš„ Markdown å…ƒç´ </div>
        </div>
        <div class="example-item" onclick="loadExampleContent('article')">
          <div class="example-item-title">ğŸ“ æ–‡ç« æ¨¡æ¿</div>
          <div class="example-item-desc">é€‚åˆå†™æŠ€æœ¯åšå®¢æˆ–æ–‡ç« çš„æ¨¡æ¿</div>
        </div>
        <div class="example-item" onclick="loadExampleContent('code')">
          <div class="example-item-title">ğŸ’» ä»£ç æ–‡æ¡£</div>
          <div class="example-item-desc">åŒ…å«ä»£ç å—å’ŒæŠ€æœ¯è¯´æ˜çš„æ¨¡æ¿</div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal()">å–æ¶ˆ</button>
      </div>
    </div>
  </div>

  <script>
    // é…ç½® marked
    marked.setOptions({
      gfm: true,              // GitHub Flavored Markdown
      breaks: true,           // æ¢è¡Œè½¬æ¢ä¸º <br>
      pedantic: false,
      sanitize: false,
      smartLists: true,
      smartypants: false
    });

    // è·å–å…ƒç´ 
    const markdownInput = document.getElementById('markdownInput');
    const preview = document.getElementById('preview');
    const charCount = document.getElementById('charCount');
    const lineCount = document.getElementById('lineCount');
    const wordCount = document.getElementById('wordCount');
    const cssFileInput = document.getElementById('cssFileInput');

    // å­˜å‚¨è‡ªå®šä¹‰CSS
    let customStyleElement = null;

    // å®æ—¶é¢„è§ˆ
    markdownInput.addEventListener('input', updatePreview);

    // æ’å…¥Markdownæ ¼å¼
    function insertFormat(type) {
      const textarea = markdownInput;
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      const selectedText = textarea.value.substring(start, end);
      const beforeText = textarea.value.substring(0, start);
      const afterText = textarea.value.substring(end);

      let insertText = '';
      let cursorOffset = 0;

      switch(type) {
        case 'h1':
          insertText = selectedText ? `# ${selectedText}` : '# æ ‡é¢˜';
          cursorOffset = selectedText ? insertText.length : 2;
          break;
        case 'h2':
          insertText = selectedText ? `## ${selectedText}` : '## æ ‡é¢˜';
          cursorOffset = selectedText ? insertText.length : 3;
          break;
        case 'h3':
          insertText = selectedText ? `### ${selectedText}` : '### æ ‡é¢˜';
          cursorOffset = selectedText ? insertText.length : 4;
          break;
        case 'bold':
          insertText = selectedText ? `**${selectedText}**` : '**ç²—ä½“æ–‡å­—**';
          cursorOffset = selectedText ? insertText.length : 2;
          break;
        case 'italic':
          insertText = selectedText ? `*${selectedText}*` : '*æ–œä½“æ–‡å­—*';
          cursorOffset = selectedText ? insertText.length : 1;
          break;
        case 'strikethrough':
          insertText = selectedText ? `~~${selectedText}~~` : '~~åˆ é™¤çº¿~~';
          cursorOffset = selectedText ? insertText.length : 2;
          break;
        case 'quote':
          insertText = selectedText ? `> ${selectedText}` : '> å¼•ç”¨æ–‡å­—';
          cursorOffset = selectedText ? insertText.length : 2;
          break;
        case 'code':
          insertText = selectedText ? `\`${selectedText}\`` : '`ä»£ç `';
          cursorOffset = selectedText ? insertText.length : 1;
          break;
        case 'codeblock':
          insertText = selectedText ? `\`\`\`\n${selectedText}\n\`\`\`` : '```javascript\nä»£ç å—\n```';
          cursorOffset = selectedText ? insertText.length : 14;
          break;
        case 'ul':
          insertText = selectedText ? `- ${selectedText}` : '- åˆ—è¡¨é¡¹';
          cursorOffset = selectedText ? insertText.length : 2;
          break;
        case 'ol':
          insertText = selectedText ? `1. ${selectedText}` : '1. åˆ—è¡¨é¡¹';
          cursorOffset = selectedText ? insertText.length : 3;
          break;
        case 'task':
          insertText = selectedText ? `- [ ] ${selectedText}` : '- [ ] ä»»åŠ¡é¡¹';
          cursorOffset = selectedText ? insertText.length : 6;
          break;
        case 'link':
          insertText = selectedText ? `[${selectedText}](url)` : '[é“¾æ¥æ–‡å­—](https://example.com)';
          cursorOffset = selectedText ? start + selectedText.length + 3 : 1;
          break;
        case 'image':
          insertText = selectedText ? `![${selectedText}](url)` : '![å›¾ç‰‡æè¿°](https://example.com/image.jpg)';
          cursorOffset = selectedText ? start + selectedText.length + 4 : 2;
          break;
        case 'table':
          insertText = '| åˆ—1 | åˆ—2 | åˆ—3 |\n|-----|-----|-----|\n| å†…å®¹ | å†…å®¹ | å†…å®¹ |';
          cursorOffset = 2;
          break;
        case 'hr':
          insertText = '\n---\n';
          cursorOffset = insertText.length;
          break;
        default:
          return;
      }

      // æ’å…¥æ–‡æœ¬
      textarea.value = beforeText + insertText + afterText;

      // è®¾ç½®å…‰æ ‡ä½ç½®
      if (selectedText) {
        textarea.selectionStart = textarea.selectionEnd = start + insertText.length;
      } else {
        textarea.selectionStart = textarea.selectionEnd = start + cursorOffset;
      }

      // èšç„¦åˆ°æ–‡æœ¬æ¡†
      textarea.focus();

      // æ›´æ–°é¢„è§ˆ
      updatePreview();
    }

    function updatePreview() {
      const markdown = markdownInput.value;

      if (markdown.trim() === '') {
        preview.innerHTML = `
          <p style="color: #999; text-align: center; padding: 40px 20px;">
            åœ¨å·¦ä¾§è¾“å…¥ Markdownï¼Œè¿™é‡Œä¼šå®æ—¶æ˜¾ç¤ºé¢„è§ˆæ•ˆæœ<br><br>
            <em>è¯•è¯•è¾“å…¥ <code># æ ‡é¢˜</code> æˆ–ç‚¹å‡»"ç¤ºä¾‹"æŒ‰é’®</em>
          </p>
        `;
      } else {
        try {
          preview.innerHTML = marked.parse(markdown);
        } catch (error) {
          preview.innerHTML = `<p style="color: #f44336;">è§£æé”™è¯¯: ${error.message}</p>`;
        }
      }

      updateStats();
    }

    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    function updateStats() {
      const text = markdownInput.value;
      charCount.textContent = text.length;
      lineCount.textContent = text.split('\n').length;
      wordCount.textContent = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
    }

    // ä¸»é¢˜åˆ‡æ¢
    function toggleTheme() {
      const body = document.body;
      const currentTheme = body.getAttribute('data-weui-theme');

      if (currentTheme === 'dark') {
        body.removeAttribute('data-weui-theme');
        localStorage.setItem('theme', 'light');
        showToast('å·²åˆ‡æ¢åˆ°äº®è‰²ä¸»é¢˜');
      } else {
        body.setAttribute('data-weui-theme', 'dark');
        localStorage.setItem('theme', 'dark');
        showToast('å·²åˆ‡æ¢åˆ°æš—è‰²ä¸»é¢˜');
      }
    }

    // åŠ è½½è‡ªå®šä¹‰CSS
    function loadCustomCSS() {
      cssFileInput.click();
    }

    // å¤„ç†CSSæ–‡ä»¶ä¸Šä¼ 
    cssFileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;

      if (!file.name.endsWith('.css')) {
        showToast('âš ï¸ è¯·é€‰æ‹©CSSæ–‡ä»¶');
        return;
      }

      const reader = new FileReader();
      reader.onload = function(event) {
        const cssContent = event.target.result;

        // ç§»é™¤æ—§çš„è‡ªå®šä¹‰æ ·å¼
        if (customStyleElement) {
          customStyleElement.remove();
        }

        // åˆ›å»ºæ–°çš„styleå…ƒç´ 
        customStyleElement = document.createElement('style');
        customStyleElement.id = 'custom-css';
        customStyleElement.textContent = cssContent;
        document.head.appendChild(customStyleElement);

        showToast('âœ… CSSå·²åŠ è½½æˆåŠŸï¼');
      };

      reader.onerror = function() {
        showToast('âŒ CSSæ–‡ä»¶è¯»å–å¤±è´¥');
      };

      reader.readAsText(file);

      // é‡ç½®æ–‡ä»¶è¾“å…¥ï¼Œå…è®¸é‡å¤åŠ è½½åŒä¸€æ–‡ä»¶
      cssFileInput.value = '';
    });

    // é‡ç½®CSSæ ·å¼
    function resetCSS() {
      if (customStyleElement) {
        customStyleElement.remove();
        customStyleElement = null;
        showToast('âœ… å·²é‡ç½®ä¸ºé»˜è®¤æ ·å¼');
      } else {
        showToast('â„¹ï¸ å½“å‰ä½¿ç”¨çš„æ˜¯é»˜è®¤æ ·å¼');
      }
    }

    // å¤åˆ¶åˆ°å¾®ä¿¡ï¼ˆå¤åˆ¶å¯Œæ–‡æœ¬å†…å®¹ï¼‰
    function copyToWeChat() {
      if (markdownInput.value.trim() === '') {
        showToast('âš ï¸ è¯·å…ˆè¾“å…¥å†…å®¹');
        return;
      }

      try {
        // åˆ›å»ºä¸€ä¸ªä¸´æ—¶å®¹å™¨
        const tempContainer = document.createElement('div');
        tempContainer.style.position = 'fixed';
        tempContainer.style.left = '-9999px';
        tempContainer.style.top = '0';
        document.body.appendChild(tempContainer);

        // å…‹éš†é¢„è§ˆå†…å®¹
        const clonedContent = preview.cloneNode(true);

        // æ·»åŠ å†…è”æ ·å¼ï¼Œç¡®ä¿å¤åˆ¶æ—¶ä¿ç•™æ ·å¼
        const styledContent = addInlineStyles(clonedContent);
        tempContainer.appendChild(styledContent);

        // é€‰ä¸­å†…å®¹
        const range = document.createRange();
        range.selectNodeContents(tempContainer);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);

        // æ‰§è¡Œå¤åˆ¶
        const successful = document.execCommand('copy');

        // æ¸…ç†
        selection.removeAllRanges();
        document.body.removeChild(tempContainer);

        if (successful) {
          showToast('âœ… å·²å¤åˆ¶ï¼å¯ç›´æ¥ç²˜è´´åˆ°å¾®ä¿¡å…¬ä¼—å·ç¼–è¾‘å™¨');
        } else {
          showToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·ä½¿ç”¨"HTMLä»£ç "æŒ‰é’®');
        }
      } catch (err) {
        console.error('å¤åˆ¶å¤±è´¥:', err);
        showToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·ä½¿ç”¨"HTMLä»£ç "æŒ‰é’®');
      }
    }

    // ä¸ºå…ƒç´ æ·»åŠ å†…è”æ ·å¼ - ä½¿ç”¨ editor1 çš„æ ·å¼
    function addInlineStyles(element) {
      // åŸºç¡€æ–‡æœ¬æ ·å¼
      const baseStyles = {
        'font-family': '-apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif',
        'font-size': '15px',
        'line-height': '1.75',
        'color': 'rgb(63, 63, 63)',
        'letter-spacing': '2px',
        'word-wrap': 'break-word',
        'word-break': 'break-word',
        'background-color': 'rgb(255, 255, 255)'
      };

      // ä¸ºæ ¹å…ƒç´ æ·»åŠ æ ·å¼
      Object.keys(baseStyles).forEach(key => {
        element.style[key.replace(/-./g, x => x[1].toUpperCase())] = baseStyles[key];
      });

      // æ ·å¼æ˜ å°„è¡¨ - ä½¿ç”¨ editor1 çš„æ ·å¼å®šä¹‰
      const styleMap = {
        'h1': 'font-size: 24px; font-weight: bold; margin: 0.6em 0; line-height: 1.4; color: rgb(30, 30, 30); letter-spacing: 2px;',
        'h2': 'font-size: 17px; font-weight: bold; margin: 0.6em 0; line-height: 1.5; color: rgb(30, 30, 30); letter-spacing: 2px;',
        'h3': 'font-size: 15px; font-weight: bold; margin: 0.5em 0; line-height: 1.5; color: rgb(30, 30, 30); letter-spacing: 2px;',
        'h4': 'font-size: 15px; font-weight: bold; margin: 0.4em 0; line-height: 1.5; color: rgb(63, 63, 63); letter-spacing: 2px;',
        'h5': 'font-size: 15px; font-weight: bold; margin: 0.4em 0; line-height: 1.5; color: rgb(63, 63, 63); letter-spacing: 2px;',
        'h6': 'font-size: 15px; font-weight: bold; margin: 0.4em 0; line-height: 1.5; color: rgb(99, 99, 99); letter-spacing: 2px;',
        'p': 'margin: 0px 8px 1em; padding: 0px; line-height: 1.75; color: rgb(63, 63, 63); font-size: 15px; letter-spacing: 2px;',
        'section': 'margin-left: 8px; margin-right: 8px;',
        'strong': 'font-weight: bold;',
        'b': 'font-weight: bold;',
        'em': 'font-style: italic;',
        'i': 'font-style: italic;',
        'code': 'font-family: Menlo, "Operator Mono", Consolas, Monaco, monospace; font-size: 13px; background-color: rgba(27, 31, 35, 0.05); padding: 0.2em 0.4em; border-radius: 3px; color: rgb(215, 58, 73);',
        'pre': 'margin: 0px 8px 10px; display: block; overflow-x: auto; color: rgb(201, 209, 217); background: rgb(13, 17, 23); text-align: left; line-height: 1.5; border-radius: 8px; font-size: 14px;',
        'blockquote': 'margin: 1em 8px; padding: 0.8em 1em; border-left: 4px solid rgb(220, 220, 220); background-color: rgba(0, 0, 0, 0.03); color: rgb(99, 99, 99);',
        'ul': 'margin: 1em 8px; padding-left: 1.5em; list-style-type: disc;',
        'ol': 'margin: 1em 8px; padding-left: 1.5em; list-style-type: decimal;',
        'li': 'margin: 0.5em 0; line-height: 1.75; color: rgb(63, 63, 63); font-size: 15px; letter-spacing: 2px;',
        'table': 'margin: 1em 8px; border-collapse: collapse; width: calc(100% - 16px); font-size: 14px;',
        'th': 'padding: 0.6em 1em; border: 1px solid rgb(229, 229, 229); text-align: left; font-weight: bold; background-color: rgb(248, 248, 248); color: rgb(30, 30, 30);',
        'td': 'padding: 0.6em 1em; border: 1px solid rgb(229, 229, 229); text-align: left; color: rgb(63, 63, 63);',
        'img': 'max-width: 100%; height: auto; display: block; margin: 0 auto; border-radius: 9px; box-shadow: rgb(180, 180, 180) 0px 0px 0.5em 0px;',
        'a': 'color: rgb(0, 128, 255); text-decoration: underline; font-weight: bold;',
        'hr': 'border-style: solid; border-width: 1px 0 0; border-color: rgba(0, 0, 0, 0.1); transform: scale(1, 0.5); margin: 1em 0;',
        'del': 'text-decoration: line-through; opacity: 0.7;',
        's': 'text-decoration: line-through; opacity: 0.7;',
        'u': 'text-decoration: underline;',
        'mark': 'background-color: rgb(255, 243, 205); padding: 0.1em 0.3em; border-radius: 2px;',
        'small': 'font-size: 12px; color: rgb(99, 99, 99);',
        'sub': 'font-size: 0.75em; vertical-align: sub;',
        'sup': 'font-size: 0.75em; vertical-align: super;',
        'kbd': 'display: inline-block; padding: 3px 6px; font-size: 12px; line-height: 1; color: rgb(68, 77, 86); vertical-align: middle; background-color: rgb(250, 251, 252); border: 1px solid rgb(209, 213, 218); border-radius: 3px; box-shadow: inset 0 -1px 0 rgb(209, 213, 218); font-family: Menlo, Consolas, monospace;'
      };

      // ä¸ºæ‰€æœ‰å­å…ƒç´ æ·»åŠ å†…è”æ ·å¼
      Object.keys(styleMap).forEach(tag => {
        const elements = element.getElementsByTagName(tag);
        for (let el of elements) {
          el.setAttribute('style', (el.getAttribute('style') || '') + ' ' + styleMap[tag]);

          // ç‰¹æ®Šå¤„ç†ï¼špre code éœ€è¦ä½¿ç”¨ä»£ç å—æ ·å¼
          if (tag === 'code' && el.parentElement && el.parentElement.tagName.toLowerCase() === 'pre') {
            el.setAttribute('style', 'font-family: Menlo, "Operator Mono", Consolas, Monaco, monospace; font-size: 13px; display: block; padding: 0.5em 1em 1em; overflow-x: auto; line-height: 1.75; white-space: pre-wrap; word-wrap: break-word; color: rgb(201, 209, 217); background: transparent;');
          }

          // æ³¨æ„ï¼šä¸æ·»åŠ è¡¨æ ¼æ–‘é©¬çº¹æ•ˆæœï¼ˆæŒ‰ç…§ editor1 çš„è¦æ±‚ï¼‰
        }
      });

      return element;
    }

    // å¤åˆ¶ HTML ä»£ç 
    function copyHTML() {
      const html = preview.innerHTML;
      const fullHTML = generateFullHTML(html);

      navigator.clipboard.writeText(fullHTML).then(() => {
        showToast('âœ… HTMLä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
      }).catch(() => {
        showToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•');
      });
    }

    // ä¸‹è½½ HTML
    function downloadHTML() {
      const html = preview.innerHTML;
      const fullHTML = generateFullHTML(html);

      const blob = new Blob([fullHTML], { type: 'text/html;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'article_' + new Date().getTime() + '.html';
      a.click();
      URL.revokeObjectURL(url);

      showToast('âœ… HTML æ–‡ä»¶å·²ä¸‹è½½');
    }

    // ç”Ÿæˆå®Œæ•´çš„ HTML
    function generateFullHTML(content) {
      // å¦‚æœæœ‰è‡ªå®šä¹‰CSSï¼ŒåŒ…å«åœ¨ç”Ÿæˆçš„HTMLä¸­
      const customCSS = customStyleElement ? customStyleElement.textContent : '';

      return `<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æˆ‘çš„æ–‡ç« </title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background-color: #f5f5f5;
    }
    .article-container {
      max-width: 677px;
      margin: 0 auto;
      background-color: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    /* å¾®ä¿¡å…¬ä¼—å·æ ·å¼ */
    .rich_media_content {
      font-family: -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;
      font-size: 15px;
      color: rgb(63, 63, 63);
      line-height: 1.75;
      letter-spacing: 2px;
    }
    .rich_media_content p {
      margin: 0px 8px 1em;
      padding: 0px;
      color: rgb(63, 63, 63);
      font-size: 15px;
      letter-spacing: 2px;
      line-height: 1.75;
    }
    .rich_media_content h1 {
      font-size: 24px;
      font-weight: bold;
      color: rgb(30, 30, 30);
      margin: 0.6em 0;
      line-height: 1.4;
    }
    .rich_media_content h2 {
      font-size: 17px;
      font-weight: bold;
      color: rgb(30, 30, 30);
      margin: 0.6em 0;
      line-height: 1.5;
    }
    .rich_media_content h3 {
      font-size: 15px;
      font-weight: bold;
      color: rgb(30, 30, 30);
      margin: 0.5em 0;
      line-height: 1.5;
    }
    .rich_media_content h4,
    .rich_media_content h5,
    .rich_media_content h6 {
      font-size: 15px;
      font-weight: bold;
      color: rgb(63, 63, 63);
      margin: 0.4em 0;
      line-height: 1.5;
    }
    .rich_media_content strong,
    .rich_media_content b {
      font-weight: bold;
    }
    .rich_media_content em,
    .rich_media_content i {
      font-style: italic;
    }
    .rich_media_content del,
    .rich_media_content s {
      text-decoration: line-through;
      opacity: 0.7;
    }
    .rich_media_content a {
      color: rgb(0, 128, 255);
      text-decoration: underline;
      font-weight: bold;
    }
    .rich_media_content img {
      max-width: 100%;
      height: auto;
      border-radius: 9px;
      box-shadow: rgb(180, 180, 180) 0px 0px 0.5em 0px;
      display: block;
      margin: 0 auto;
    }
    .rich_media_content hr {
      border-style: solid;
      border-width: 1px 0 0;
      border-color: rgba(0, 0, 0, 0.1);
      transform: scale(1, 0.5);
      margin: 1em 0;
    }
    .rich_media_content pre {
      margin: 0px 8px 10px;
      display: block;
      overflow-x: auto;
      color: rgb(201, 209, 217);
      background: rgb(13, 17, 23);
      text-align: left;
      line-height: 1.5;
      border-radius: 8px;
      padding: 0px;
      font-size: 14px;
    }
    .rich_media_content pre code {
      font-family: Menlo, "Operator Mono", Consolas, Monaco, monospace;
      font-size: 13px;
      display: block;
      padding: 0.5em 1em 1em;
      overflow-x: auto;
      line-height: 1.75;
      color: rgb(201, 209, 217);
      background: transparent;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .rich_media_content code {
      font-family: Menlo, "Operator Mono", Consolas, Monaco, monospace;
      font-size: 13px;
      background-color: rgba(27, 31, 35, 0.05);
      padding: 0.2em 0.4em;
      border-radius: 3px;
      color: rgb(215, 58, 73);
    }
    .rich_media_content blockquote {
      margin: 1em 8px;
      padding: 0.8em 1em;
      border-left: 4px solid rgb(220, 220, 220);
      background-color: rgba(0, 0, 0, 0.03);
      color: rgb(99, 99, 99);
    }
    .rich_media_content blockquote p {
      margin: 0.5em 0;
      padding: 0;
      line-height: 1.75;
      font-size: 15px;
      letter-spacing: 2px;
      color: inherit;
    }
    .rich_media_content ul {
      margin: 1em 8px;
      padding-left: 1.5em;
      list-style-type: disc;
    }
    .rich_media_content ol {
      margin: 1em 8px;
      padding-left: 1.5em;
      list-style-type: decimal;
    }
    .rich_media_content li {
      margin: 0.5em 0;
      color: rgb(63, 63, 63);
      font-size: 15px;
      letter-spacing: 2px;
      line-height: 1.75;
    }
    .rich_media_content table {
      margin: 1em 8px;
      border-collapse: collapse;
      width: calc(100% - 16px);
      font-size: 14px;
    }
    .rich_media_content th,
    .rich_media_content td {
      padding: 0.6em 1em;
      border: 1px solid rgb(229, 229, 229);
      text-align: left;
    }
    .rich_media_content th {
      font-weight: bold;
      background-color: rgb(248, 248, 248);
      color: rgb(30, 30, 30);
    }
    .rich_media_content td {
      color: rgb(63, 63, 63);
    }
    ${customCSS ? '\n    /* è‡ªå®šä¹‰CSS */\n    ' + customCSS : ''}
  </style>
</head>
<body>
  <div class="article-container">
    <div class="rich_media_content">
${content}
    </div>
  </div>
</body>
</html>`;
    }

    // æ¸…ç©ºç¼–è¾‘å™¨
    function clearEditor() {
      if (markdownInput.value.trim() === '' || confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
        markdownInput.value = '';
        updatePreview();
        showToast('å·²æ¸…ç©ºå†…å®¹');
      }
    }

    // æ˜¾ç¤ºç¤ºä¾‹æ¨¡æ€æ¡†
    function loadExample() {
      document.getElementById('exampleModal').classList.add('show');
    }

    // å…³é—­æ¨¡æ€æ¡†
    function closeModal() {
      document.getElementById('exampleModal').classList.remove('show');
    }

    // åŠ è½½ç¤ºä¾‹å†…å®¹
    function loadExampleContent(type) {
      const examples = {
        basic: `# æ¬¢è¿ä½¿ç”¨ Markdown ç¼–è¾‘å™¨

è¿™æ˜¯ä¸€ä¸ªåŸºç¡€ç¤ºä¾‹ï¼Œå±•ç¤ºå¸¸ç”¨çš„ Markdown æ ¼å¼ã€‚

## æ–‡æœ¬æ ·å¼

è¿™æ˜¯æ™®é€šæ®µè½ã€‚ä½ å¯ä»¥ä½¿ç”¨ **ç²—ä½“**ã€*æ–œä½“*ã€~~åˆ é™¤çº¿~~ ç­‰æ ·å¼ã€‚

## åˆ—è¡¨

æ— åºåˆ—è¡¨ï¼š
- é¡¹ç›® 1
- é¡¹ç›® 2
- é¡¹ç›® 3

æœ‰åºåˆ—è¡¨ï¼š
1. ç¬¬ä¸€æ­¥
2. ç¬¬äºŒæ­¥
3. ç¬¬ä¸‰æ­¥

## ä»£ç 

è¡Œå†…ä»£ç ï¼š\`console.log('Hello')\`

ä»£ç å—ï¼š
\`\`\`javascript
function greet(name) {
  console.log(\`Hello, \${name}!\`);
}
\`\`\`

## å¼•ç”¨

> è¿™æ˜¯ä¸€æ®µå¼•ç”¨æ–‡å­—ã€‚
> å¯ä»¥ç”¨æ¥å±•ç¤ºåè¨€æˆ–é‡è¦å†…å®¹ã€‚

## é“¾æ¥

[è®¿é—® GitHub](https://github.com)

---

å¼€å§‹ç¼–è¾‘ä½ çš„å†…å®¹å§ï¼`,

        full: `# Markdown å®Œæ•´ç¤ºä¾‹

## ä¸€ã€æ ‡é¢˜å±‚çº§

### ä¸‰çº§æ ‡é¢˜
#### å››çº§æ ‡é¢˜
##### äº”çº§æ ‡é¢˜
###### å…­çº§æ ‡é¢˜

## äºŒã€æ–‡æœ¬æ ¼å¼

**ç²—ä½“æ–‡å­—** | *æ–œä½“æ–‡å­—* | ***ç²—æ–œä½“*** | ~~åˆ é™¤çº¿~~

H<sub>2</sub>O | X<sup>2</sup>

## ä¸‰ã€åˆ—è¡¨

### æ— åºåˆ—è¡¨
- é¡¹ç›® 1
  - å­é¡¹ 1.1
  - å­é¡¹ 1.2
- é¡¹ç›® 2

### æœ‰åºåˆ—è¡¨
1. ç¬¬ä¸€é¡¹
2. ç¬¬äºŒé¡¹
   1. å­é¡¹ 2.1
   2. å­é¡¹ 2.2

### ä»»åŠ¡åˆ—è¡¨
- [x] å·²å®Œæˆ
- [ ] å¾…å®Œæˆ

## å››ã€ä»£ç 

è¡Œå†…ä»£ç ï¼š\`const x = 10;\`

ä»£ç å—ï¼š
\`\`\`javascript
function fibonacci(n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}
\`\`\`

## äº”ã€å¼•ç”¨

> è¿™æ˜¯ä¸€æ®µå¼•ç”¨ã€‚
>
> > åµŒå¥—å¼•ç”¨ã€‚

## å…­ã€è¡¨æ ¼

| åŠŸèƒ½ | æ”¯æŒ | è¯´æ˜ |
|------|------|------|
| æ ‡é¢˜ | âœ… | H1-H6 |
| åˆ—è¡¨ | âœ… | æœ‰åº/æ— åº |
| ä»£ç  | âœ… | è¡Œå†…/å— |

## ä¸ƒã€é“¾æ¥å’Œå›¾ç‰‡

[GitHub](https://github.com)

![ç¤ºä¾‹å›¾ç‰‡](https://via.placeholder.com/600x300)

---

è¿™æ˜¯åˆ†å‰²çº¿

## å…«ã€å…¶ä»–å…ƒç´ 

<kbd>Ctrl</kbd> + <kbd>C</kbd> å¤åˆ¶`,

        article: `# å¦‚ä½•å†™å‡ºä¼˜ç§€çš„æŠ€æœ¯æ–‡ç« 

> åˆ†äº«ä¸€äº›å†™ä½œæŠ€å·§å’Œæœ€ä½³å®è·µ

## ğŸ“‹ å‰è¨€

å†™ä½œæ˜¯ä¸€é¡¹é‡è¦çš„æŠ€èƒ½ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæŠ€æœ¯äººå‘˜æ¥è¯´ã€‚ä¸€ç¯‡å¥½çš„æŠ€æœ¯æ–‡ç« ä¸ä»…èƒ½å¸®åŠ©ä»–äººï¼Œä¹Ÿèƒ½æå‡è‡ªå·±çš„ç†è§£ã€‚

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹

### 1. æ˜ç¡®ç›®æ ‡è¯»è€…

åœ¨å¼€å§‹å†™ä½œå‰ï¼Œå…ˆæ€è€ƒï¼š
- è¯»è€…çš„æŠ€æœ¯æ°´å¹³å¦‚ä½•ï¼Ÿ
- ä»–ä»¬æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ
- éœ€è¦å¤šå°‘èƒŒæ™¯çŸ¥è¯†ï¼Ÿ

### 2. ç»“æ„æ¸…æ™°

ä¸€ä¸ªå¥½çš„æ–‡ç« ç»“æ„ï¼š

1. **å¼•è¨€** - è¯´æ˜æ–‡ç« ç›®çš„
2. **æ­£æ–‡** - è¯¦ç»†å±•å¼€å†…å®¹
3. **ç¤ºä¾‹** - æä¾›å®é™…æ¡ˆä¾‹
4. **æ€»ç»“** - å›é¡¾è¦ç‚¹

### 3. ä»£ç ç¤ºä¾‹

æä¾›æ¸…æ™°çš„ä»£ç ç¤ºä¾‹ï¼š

\`\`\`javascript
// å¥½çš„ä»£ç ç¤ºä¾‹åº”è¯¥ï¼š
// 1. ç®€æ´æ˜äº†
// 2. æœ‰é€‚å½“æ³¨é‡Š
// 3. å¯ä»¥ç›´æ¥è¿è¡Œ

function example() {
  console.log("Hello, World!");
}
\`\`\`

## ğŸ’¡ å†™ä½œæŠ€å·§

| æŠ€å·§ | è¯´æ˜ | é‡è¦æ€§ |
|------|------|--------|
| ç®€æ´ | é¿å…å†—ä½™ | â­â­â­â­â­ |
| å‡†ç¡® | æŠ€æœ¯ç»†èŠ‚æ­£ç¡® | â­â­â­â­â­ |
| æ˜“è¯» | æ’ç‰ˆèˆ’é€‚ | â­â­â­â­ |

## ğŸ“ å®è·µå»ºè®®

> **æç¤º**: å†™å®Œåå¤šè¯»å‡ éï¼Œç«™åœ¨è¯»è€…è§’åº¦æ€è€ƒæ˜¯å¦æ¸…æ™°æ˜“æ‡‚ã€‚

- âœ… ä½¿ç”¨æ ‡é¢˜å±‚çº§ç»„ç»‡å†…å®¹
- âœ… é€‚å½“ä½¿ç”¨åˆ—è¡¨å’Œè¡¨æ ¼
- âœ… æ·»åŠ ä»£ç ç¤ºä¾‹
- âœ… é…å›¾è¯´æ˜ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰
- âŒ é¿å…é•¿ç¯‡å¤§è®º
- âŒ ä¸è¦å‡è®¾è¯»è€…çŸ¥é“æ‰€æœ‰æ¦‚å¿µ

## ğŸ‰ æ€»ç»“

å¥½çš„æŠ€æœ¯æ–‡ç« éœ€è¦ï¼š

1. æ˜ç¡®çš„ç›®æ ‡
2. æ¸…æ™°çš„ç»“æ„
3. å®ç”¨çš„ç¤ºä¾‹
4. æ˜“è¯»çš„æ’ç‰ˆ

ç°åœ¨å¼€å§‹å†™ä½ çš„ç¬¬ä¸€ç¯‡æ–‡ç« å§ï¼

---

*æœ¬æ–‡ä½¿ç”¨ Markdown ç¼–å†™ï¼Œæ¸²æŸ“ä¸ºå¾®ä¿¡å…¬ä¼—å·é£æ ¼*`,

        code: `# API ä½¿ç”¨æ–‡æ¡£

## ğŸ“– æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ API æ–‡æ¡£ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ RESTful APIã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

\`\`\`bash
npm install example-api
# æˆ–
yarn add example-api
\`\`\`

### åŸºç¡€ç”¨æ³•

\`\`\`javascript
import { ApiClient } from 'example-api';

const client = new ApiClient({
  apiKey: 'your-api-key',
  baseUrl: 'https://api.example.com'
});
\`\`\`

## ğŸ“¡ API ç«¯ç‚¹

### 1. è·å–ç”¨æˆ·ä¿¡æ¯

**è¯·æ±‚:**
\`\`\`http
GET /api/users/:id
\`\`\`

**å‚æ•°:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| id | string | âœ… | ç”¨æˆ·ID |

**å“åº”:**
\`\`\`json
{
  "id": "123",
  "name": "å¼ ä¸‰",
  "email": "zhangsan@example.com"
}
\`\`\`

### 2. åˆ›å»ºç”¨æˆ·

**è¯·æ±‚:**
\`\`\`http
POST /api/users
Content-Type: application/json
\`\`\`

**è¯·æ±‚ä½“:**
\`\`\`json
{
  "name": "æå››",
  "email": "lisi@example.com"
}
\`\`\`

**ç¤ºä¾‹ä»£ç :**
\`\`\`javascript
const response = await client.createUser({
  name: 'æå››',
  email: 'lisi@example.com'
});

console.log(response.data);
\`\`\`

## âš ï¸ é”™è¯¯å¤„ç†

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

**é”™è¯¯å“åº”ç¤ºä¾‹:**
\`\`\`json
{
  "error": "Unauthorized",
  "message": "Invalid API key"
}
\`\`\`

## ğŸ’¡ æœ€ä½³å®è·µ

> **æç¤º**: å§‹ç»ˆæ£€æŸ¥ API å“åº”çš„çŠ¶æ€ç 

- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨ API å¯†é’¥
- âœ… å®ç°é”™è¯¯é‡è¯•æœºåˆ¶
- âœ… æ·»åŠ è¯·æ±‚è¶…æ—¶è®¾ç½®
- âŒ ä¸è¦åœ¨å®¢æˆ·ç«¯æš´éœ²å¯†é’¥

## ğŸ“š æ›´å¤šç¤ºä¾‹

### é”™è¯¯å¤„ç†

\`\`\`javascript
try {
  const user = await client.getUser('123');
  console.log(user);
} catch (error) {
  if (error.status === 404) {
    console.error('ç”¨æˆ·ä¸å­˜åœ¨');
  } else {
    console.error('è¯·æ±‚å¤±è´¥:', error.message);
  }
}
\`\`\`

### æ‰¹é‡æ“ä½œ

\`\`\`javascript
const users = await Promise.all([
  client.getUser('1'),
  client.getUser('2'),
  client.getUser('3')
]);
\`\`\`

---

**ç‰ˆæœ¬:** 1.0.0
**æ›´æ–°æ—¶é—´:** 2026-01-29`
      };

      markdownInput.value = examples[type];
      updatePreview();
      closeModal();
      showToast('å·²åŠ è½½ç¤ºä¾‹å†…å®¹');
    }

    // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');

      setTimeout(() => {
        toast.classList.remove('show');
      }, 2000);
    }

    // æ¢å¤ä¸»é¢˜è®¾ç½®
    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.setAttribute('data-weui-theme', 'dark');
      }

      // åˆå§‹åŒ–ç»Ÿè®¡
      updateStats();
    });

    // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
    document.getElementById('exampleModal').addEventListener('click', (e) => {
      if (e.target.id === 'exampleModal') {
        closeModal();
      }
    });

    // é”®ç›˜å¿«æ·é”®
    document.addEventListener('keydown', (e) => {
      // Ctrl/Cmd + B ç²—ä½“
      if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        insertFormat('bold');
      }

      // Ctrl/Cmd + I æ–œä½“
      if ((e.ctrlKey || e.metaKey) && e.key === 'i') {
        e.preventDefault();
        insertFormat('italic');
      }

      // Ctrl/Cmd + K é“¾æ¥
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        insertFormat('link');
      }

      // Ctrl/Cmd + S ä¸‹è½½
      if ((e.ctrlKey || e.metaKey) && e.key === 's') {
        e.preventDefault();
        downloadHTML();
      }

      // Ctrl/Cmd + Shift + C å¤åˆ¶
      if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'C') {
        e.preventDefault();
        copyHTML();
      }

      // Ctrl/Cmd + D åˆ‡æ¢ä¸»é¢˜
      if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
        e.preventDefault();
        toggleTheme();
      }

      // Esc å…³é—­æ¨¡æ€æ¡†
      if (e.key === 'Escape') {
        closeModal();
      }
    });

    // é˜²æ­¢é¡µé¢åˆ·æ–°æ—¶ä¸¢å¤±å†…å®¹
    window.addEventListener('beforeunload', (e) => {
      if (markdownInput.value.trim() !== '') {
        e.preventDefault();
        e.returnValue = '';
      }
    });
  </script>
</body>
</html>
    }
